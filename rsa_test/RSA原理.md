# RSA 

### 非对称加密算法

1. 乙方生成两把密钥（公钥和私钥）。公钥是公开的，任何人都可以获得，私钥则是保密的。
2. 甲方获取乙方的公钥，然后用它对信息加密。
3. 乙方得到加密后的信息，用私钥解密。

RSA是使用最广的非对称加密算法。秘钥越长，越难被破解。目前可被破解的RSA秘钥为768个二进制位。所以1024位RSA秘钥基本安全，2048位RSA秘钥极其安全。

### RSA原理

- 互质关系：如果两个正整数，除了1以外，没有其他公因子
- 欧拉函数：任意给定正整数n，请问在小于等于n的正整数之中，有多少个与n构成互质关系？计算这个值得方法叫做欧拉函数。
- 模反元素：如果两个正整数a和n互质，那么一定可以找到整数b，使得 ab-1 被n整除，或者说ab被n除的余数是1。

### 秘钥生成步骤

1. 随机选择两个不相等的质数p和q。（这两个质数越大，就越难被破解）
2. 计算p和q的乘积n。（这两个质数的乘积转换为二进制的位数，就是秘钥的长度，实际应用中，RSA秘钥一般为1024位）
3. 计算n的欧拉函数φ(n)。
4. 随机选择一个整数e，条件是1< e < φ(n)，且e与φ(n)互质（实际应用中，常常选择65537。）
5. 计算e对于φ(n)的模反元素d。
6. 将n和e封装成公钥，n和d封装成私钥。


### RSA算法的可靠性

公钥用到了两个（n和e），其余四个数字都是不公开的。其中最关键的是d，因为n和d组成了私钥，一旦d泄漏，就等于私钥泄漏。

**如果n可以被因数分解，d就可以算出，也就意味着私钥被破解。**


### 加密和解密

加密要用公钥 (n,e)，m进行加密。这里需要注意，m必须是整数（字符串可以取ascii值或unicode值），且m必须小于n。

解密要用私钥(n,d)


公钥(n,e) 只能加密小于n的整数m，那么如果要加密大于n的整数，该怎么办？

1. 一种是把长信息分割成若干段短消息，每段分别加密
2. 先选择一种"对称性加密算法"（比如DES），用这种算法的密钥加密信息，再用RSA公钥加密DES密钥。



